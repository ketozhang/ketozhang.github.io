<!doctype html>
<html lang='en'>

<head>
    <meta charset="UTF-8">
    <title>StaticPy</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap time -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link href="https://ketozhang.github.io/StaticPy/static/base.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans|Source+Code+Pro|Quicksand" rel="stylesheet">
    <link href="https://ketozhang.github.io/StaticPy/static/prism.css" rel="stylesheet">
    <link rel="shortcut icon" href="https://ketozhang.github.io/StaticPy/static/favicon.ico">

    <!-- LaTeX Stylesheet -->
    
    <div class="d-none">
    $$
        \newcommand{abs}[1]{\left | #1 \right |}
        \newcommand{set}[1]{\left\{#1\right\}}
    $$
    </div>
    
</head>

<body>
    
<div class="container-fluid" id="note">
    <h1 class="title text-center pt-3">Lecture Notes12</h1>
    <hr>
    <div class="row">
        <div class="col-lg-2 d-none d-lg-block"></div>
        <div class="col-lg-7 col-md-10">
            <h1 id="lecture-notes-12">Lecture Notes 12</h1>
<h2 id="joins">Joins</h2>
<p>The query to join two table:</p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span> [<span class="kw">DISTINCT</span>] &lt;columns&gt;
    <span class="kw">FROM</span> &lt;tables&gt;
    ...;</code></pre></div>
<p>Where <code>&lt;tables&gt;</code> can look like <code>table1 as t1, table2 as t2</code>. The <code>as</code> statement assigns <code>table1</code> to have an <strong>alias</strong> <code>t1</code>.</p>
<p>There are multiple types of joins:</p>
<dl>
<dt>Inner</dt>
<dd><p>The <strong>inner join</strong> (aka <strong>full inner join</strong> or <strong>natural join</strong>) joins the intersection of the two table by looking at the shared column. This is done by default on the <code>FROM</code> clause.</p>
<p>One may do an inner join even if there exist no shared column by specifying which column and how to compare (conditional statement). The format of this is:</p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span> [<span class="kw">DISTINCT</span>] &lt;columns&gt;
    <span class="kw">FROM</span> &lt;table1&gt; <span class="kw">INNER</span> <span class="kw">JOIN</span> &lt;table2&gt;
    <span class="kw">ON</span> &lt;condition&gt;;</code></pre></div>
<p>A join by looking at the primary key is,</p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span> [<span class="kw">DISTINCT</span>] &lt;columns&gt;
    <span class="kw">FROM</span> &lt;table1&gt; <span class="kw">NATURAL</span> <span class="kw">JOIN</span> &lt;table2&gt;
    <span class="kw">ON</span> &lt;condition&gt;;</code></pre></div>
</dd>
<dt>Left and Right:</dt>
<dd><p><strong>Left join</strong> and <strong>right join</strong> (aka <strong>left outer join</strong>, <strong>right outer join</strong>) does an inner join but includes unmatched entries from either the left table or right table.</p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span> [<span class="kw">DISTINCT</span>] &lt;columns&gt;
    <span class="kw">FROM</span> &lt;left_table&gt; &lt;LEFT|RIGHT&gt; <span class="kw">JOIN</span> &lt;right_table&gt;
    <span class="kw">ON</span> &lt;condition&gt;;</code></pre></div>
</dd>
</dl>
<p>Note that a left join's unmatched entries will take the left index and pair it with a <code>NULL</code> index. Similar idea for right joins.</p>
<dl>
<dt>Full:</dt>
<dd><p>The <strong>full join</strong> (aka <strong>full outer join</strong>) includes all entries and pairs any missing entries as <code>NULL</code>.</p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span> [<span class="kw">DISTINCT</span>] &lt;columns&gt;
    <span class="kw">FROM</span> &lt;left_table&gt; <span class="kw">FULL</span> <span class="kw">JOIN</span> &lt;right_table&gt;
    <span class="kw">ON</span> &lt;condition&gt;;</code></pre></div>
</dd>
</dl>
<h2 id="null">NULL</h2>
<p>A note about <code>NULL</code> values. <code>NULL</code> values are special values for many cases signifying missing data or some aggregation/arithmetic error. There is are a few rules to follow.</p>
<dl>
<dt>Comparison with <code>NULL</code></dt>
<dd>Any boolean operator <code>&lt; &lt;= &gt; &gt;= =</code> applied on <code>NULL</code> returns NULL.
</dd>
<dt>Finding <code>NULL</code></dt>
<dd><p>To check if an entry <code>NULL</code> use:</p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span> &lt;columns&gt; 
    <span class="kw">FROM</span> &lt;table&gt; 
    <span class="kw">WHERE</span> &lt;column&gt; <span class="kw">IS</span> <span class="kw">NULL</span>;</code></pre></div>
</dd>
<dt><code>NULL</code> has special booleans</dt>
<dd><p><code>NULL</code> is has special rules when special boolean operators are applied on <code>NULL</code> data. These special boolean operators are:</p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql">...
<span class="kw">WHERE</span> &lt;column&gt; &lt;NOT|AND|OR&gt; <span class="kw">null</span>;</code></pre></div>
<p>Few great examples are (in psuedo-code):</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">NOT NULL     <span class="op">==</span>   NULL
T <span class="op">&amp;</span> NULL     <span class="op">==</span>   NULL  <span class="co"># as if NULL is falsy</span>
F <span class="op">&amp;</span> NULL     <span class="op">==</span>   F
NULL <span class="op">&amp;</span> F     <span class="op">==</span>   F     <span class="co"># F is more false than NULL</span>
NULL <span class="op">&amp;</span> NULL  <span class="op">==</span>   F

NULL <span class="kw">or</span> T    <span class="op">==</span>  T
NULL <span class="kw">or</span> F    <span class="op">==</span>  NULL   <span class="co"># NULL is more true than F</span>
NULL <span class="kw">or</span> NULL <span class="op">==</span>  NULL</code></pre></div>
<p>Boolean operations on <code>NULL</code> is symmetric such the reverse of any boolean operation is the same (e.g., <code>NULL or T == T or NULL</code>).</p>
<h2 id="sql-simple-random-sample">SQL Simple Random Sample</h2>
<p>To do a simple random sample in SQL:</p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">CREATE</span> <span class="kw">TABLE</span> &lt;sample_name&gt; <span class="kw">AS</span>
<span class="kw">SELECT</span> *, <span class="kw">RANDOM</span>() <span class="kw">as</span> u
<span class="kw">FROM</span> &lt;table <span class="kw">of</span> data&gt;
<span class="kw">ORDER</span> <span class="kw">BY</span> u
<span class="kw">LIMIT</span> &lt;integer&gt;</code></pre></div>
</dd>
</dl>
        </div>
        <div class="col-md-2 d-none d-md-block">
            <div class="sticky-top onthispage">
                <ul id="onthispage-list" class="no-list-style">On This Page</ul>
            </div>
        </div>
    </div>
</div>

    <footer class="py-2 bg-white">
    <div class="container">
        <p class="text-right m-0"> Generated by <a href="https://github.com/ketozhang/StaticPy">StaticPy</a> |
            Designed
            by <a href="https://github.com/ketozhang">Keto Z.</a>
        </p>
    </div>
</footer>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>

    <script src="https://ketozhang.github.io/StaticPy/static/datetime.js"></script>
    <script src="https://ketozhang.github.io/StaticPy/static/codeHighlight.js"></script>
    <script src="https://ketozhang.github.io/StaticPy/static/prism.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.js"></script>
    <script src="https://ketozhang.github.io/StaticPy/static/onThisPage.js"></script>

    <!-- MathJax -->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>
    
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
    </script>
    

    <!-- Bootstrap JS -->
    <!-- TODO: trim JS if not needed -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    <!-- React -->
    <!-- TODO: do we need React? -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.1.0/react.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.1.0/react-dom.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/JSXTransformer.js"></script>-->


    <script>
        anchors.add();
        $(document).ready(function () {
            Prism.highlightAll();
        })
    </script>
</body>

</html>